function addAlpineDirective(){Alpine.directive("repeater",e=>{setTimeout(()=>{e.dispatchEvent(new CustomEvent("repeater:ready"))})})}"undefined"!=typeof Alpine?addAlpineDirective():document.addEventListener("alpine:init",()=>{addAlpineDirective()}),window.repeater=(()=>({groups:[],value:"",initialValue:[],$alpineLoader:document.querySelector(".alpine-loader"),addGroup(e){let i={};repeaterGroup&&(i=JSON.parse(JSON.stringify(repeaterGroup))),e?this.groups.push(i):this.groups.unshift(i)},addFields(e){repeaterFields&&this.groups[e].fields.push(JSON.parse(JSON.stringify(repeaterFields)))},removeGroup(e){this.groups.splice(e,1),this.updateValues()},removeField(e,i){this.groups[e].fields.splice(i,1),this.updateValues()},updateValues(){this.value=JSON.stringify(this.groups)},setInitialValue(){this.initialValue=initialValues,this.groups=[],this.initialValue&&(console.log("script.js:186","  ↴","\n",this.initialValue),this.groups=this.initialValue,this.value=JSON.stringify(this.groups)),this.$nextTick(()=>{this.$alpineLoader.classList.remove("rex-visible")})},moveGroup(e,i){this.groups.splice(i,0,this.groups.splice(e,1)[0]),this.updateValues()},moveField(e,i,s){this.groups[e].fields.splice(s,0,this.groups[e].fields.splice(i,1)[0]),this.updateValues()},addLink(e,i,s,t){let a=openLinkMap(e);return console.log("script.js:214","  ↴","\n",e),$(a).on("rex:selectLink",(e,a,l)=>{this.groups[i].fields[s][t].id=a.replace("redaxo://",""),this.groups[i].fields[s][t].name=l,this.updateValues()}),!1},removeLink(e,i,s){this.groups[e].fields[i][s].id="",this.groups[e].fields[i][s].name="",this.updateValues()},addImage(e,i,s,t){const a=addREXMedia(e);return $(a).on("rex:selectMedia",(e,a)=>{this.groups[i].fields[s][t]=a,this.updateValues()}),!1},selectImage(e,i,s,t){const a=openREXMedia(e);return $(a).on("rex:selectMedia",(e,a)=>{this.groups[i].fields[s][t]=a,this.updateValues()}),!1},deleteImage(e,i,s,t){deleteREXMedia(e),this.groups[i].fields[s][t]="",this.updateValues()}}));
